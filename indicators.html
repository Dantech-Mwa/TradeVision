<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Indicators – TradeVision</title>
  <link rel="icon" href="assets/icons/chart.svg" type="image/svg+xml">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/technicalindicators@3"></script>
  <style>
    :root{
      --bg:#141518;--bg-light:#1e222d;--text:#d1d4dc;--text-light:#9ea1b5;
      --accent:#2962ff;--green:#26a69a;--red:#ef5350;--border:#2d313e;--card:#1e222d;
      --sidebar-bg:#1a1d29;--sidebar-hover:#252932;--sidebar-active:#2962ff;
    }
    [data-theme="light"]{
      --bg:#ffffff;--bg-light:#f8f9fa;--text:#2d3748;--text-light:#718096;
      --accent:#2962ff;--green:#26a69a;--red:#ef5350;--border:#e2e8f0;--card:#ffffff;
      --sidebar-bg:#f1f3f5;--sidebar-hover:#e2e8f0;--sidebar-active:#2962ff;
    }
    *,*::before,*::after{box-sizing:border-box;}
    body{margin:0;font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);}
    a{color:var(--accent);text-decoration:none;}
    .container{max-width:1400px;margin:0 auto;padding:2rem 1rem;}
    .header{background:var(--bg-light);border-bottom:1px solid var(--border);padding:.75rem 0;position:sticky;top:0;z-index:100;}
    .flex-between{display:flex;justify-content:space-between;align-items:center;}
    .logo{font-weight:700;font-size:1.4rem;color:var(--accent);}
    .logo i{font-size:1.5rem;}
    .nav-links a{margin:0 .75rem;font-weight:500;}
    .icon-btn{background:none;border:none;color:var(--text-light);font-size:1.2rem;cursor:pointer;padding:.5rem;}

    /* Panel Layout */
    .panel{display:flex;gap:1.5rem;height:calc(100vh - 120px);}
    .sidebar{width:260px;flex-shrink:0;background:var(--sidebar-bg);border-radius:12px;padding:1rem;overflow-y:auto;}
    .sidebar h3{font-size:.85rem;font-weight:600;color:var(--text-light);margin:1.5rem 0 .5rem;text-transform:uppercase;letter-spacing:.5px;}
    .sidebar ul{list-style:none;padding:0;margin:0;}
    .sidebar li{
      padding:.75rem 1rem;cursor:pointer;border-radius:8px;margin-bottom:.25rem;
      font-weight:500;display:flex;align-items:center;gap:.5rem;transition:.2s;
    }
    .sidebar li:hover{background:var(--sidebar-hover);}
    .sidebar li.active{background:var(--sidebar-active);color:white;}
    .sidebar li i{font-size:1rem;}

    .main{flex:1;overflow:hidden;display:flex;flex-direction:column;}
    .top-bar{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:1rem;margin-bottom:1rem;position:relative;}
    .search-input{
      width:100%;padding:.75rem 1rem .75rem 2.5rem;border:none;background:transparent;
      color:var(--text);font-size:1rem;
    }
    .search-input:focus{outline:none;}
    .search-icon{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:var(--text-light);}

    .tabs{display:flex;gap:0;border-bottom:1px solid var(--border);margin-bottom:1rem;}
    .tab-btn{
      padding:.75rem 1.5rem;border:none;background:none;color:var(--text-light);
      font-weight:500;cursor:pointer;position:relative;transition:color .2s;
    }
    .tab-btn:hover{color:var(--text);}
    .tab-btn.active{color:var(--accent);font-weight:600;}
    .tab-btn.active::after{
      content:'';position:absolute;bottom:-1px;left:0;right:0;height:2px;
      background:var(--accent);border-radius:1px;
    }

    .content{flex:1;overflow-y:auto;padding-right:.5rem;}
    .indicator-list{list-style:none;padding:0;margin:0;}
    .indicator-item{
      padding:.75rem 1rem;cursor:pointer;border-bottom:1px solid var(--border);
      display:flex;justify-content:space-between;align-items:center;
      transition:.2s;
    }
    .indicator-item:hover{background:var(--bg-light);}
    .indicator-item .name{font-weight:500;}
    .indicator-item .new{
      background:#ff9800;color:white;padding:.2rem .4rem;font-size:.65rem;
      border-radius:4px;margin-left:.5rem;
    }
    .indicator-item .add-btn{
      background:var(--accent);color:white;border:none;border-radius:4px;
      width:28px;height:28px;font-size:.9rem;cursor:pointer;
    }

    .footer{background:var(--bg-light);border-top:1px solid var(--border);padding:1rem 0;font-size:.8rem;text-align:center;color:var(--text-light);}
  </style>
</head>

<body data-theme="dark">

<header class="header">
  <div class="container flex-between">
    <div class="logo"><a href="index.html"><i class="fas fa-chart-line"></i> TradeVision</a></div>
    <nav class="nav-links">
      <a href="chart.html">Chart</a>
      <a href="watchlist.html">Watchlist</a>
      <a href="screener.html">Screener</a>
      <a href="ideas.html">Ideas</a>
      <a href="alerts.html">Alerts</a>
    </nav>
    <button id="theme-toggle" class="icon-btn"><i class="fas fa-moon"></i></button>
  </div>
</header>

<div class="container">
  <h1 style="margin-bottom:.5rem;">Indicators, metrics, and strategies</h1>

  <div class="panel">
    <!-- Sidebar -->
    <div class="sidebar">
      <h3>Personal</h3>
      <ul>
        <li data-section="my-scripts"><i class="fas fa-user"></i> My scripts</li>
        <li data-section="invite-only"><i class="fas fa-lock"></i> Invite-only</li>
      </ul>

      <h3>Built-in</h3>
      <ul>
        <li class="active" data-section="technicals"><i class="fas fa-chart-line"></i> Technicals</li>
        <li data-section="financials"><i class="fas fa-dollar-sign"></i> Financials</li>
      </ul>

      <h3>Community</h3>
      <ul>
        <li data-section="editors-picks"><i class="fas fa-star"></i> Editors' picks</li>
        <li data-section="top"><i class="fas fa-medal"></i> Top</li>
        <li data-section="trending"><i class="fas fa-fire"></i> Trending</li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="main">
      <div class="top-bar">
        <i class="fas fa-search search-icon"></i>
        <input type="text" class="search-input" placeholder="Search" id="global-search">
      </div>

      <div class="tabs">
        <button class="tab-btn active" data-tab="indicators">Indicators</button>
        <button class="tab-btn" data-tab="strategies">Strategies</button>
        <button class="tab-btn" data-tab="profiles">Profiles</button>
        <button class="tab-btn" data-tab="patterns">Patterns</button>
      </div>

      <div class="content">
        <ul id="indicator-list" class="indicator-list"></ul>
      </div>
    </div>
  </div>
</div>

<footer class="footer"><div class="container">© 2025 TradeVision. Open Source.</div></footer>

<script>
/* ──────────────────────────────────────
   1. Theme toggle
   ────────────────────────────────────── */
const themeBtn = document.getElementById('theme-toggle');
const themeIcon = themeBtn.querySelector('i');
themeBtn.addEventListener('click', () => {
  const isDark = document.body.getAttribute('data-theme') === 'dark';
  document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
  themeIcon.classList.toggle('fa-moon'); themeIcon.classList.toggle('fa-sun');
  localStorage.setItem('theme', isDark ? 'light' : 'dark');
});
const saved = localStorage.getItem('theme') || 'dark';
document.body.setAttribute('data-theme', saved);
if (saved === 'light') themeIcon.classList.replace('fa-moon','fa-sun');

/* ──────────────────────────────────────
   2. Data from your images
   ────────────────────────────────────── */
const indicators = [
  "Time Price Opportunity", "Session Time Price Opportunity", "Auto Anchored Volume Profile",
  "Fixed Range Volume Profile", "Periodic Volume Profile", "Session Volume Profile",
  "Session Volume Profile HD", "Visible Range Volume Profile"
];

const strategies = [
  "BarUpDn Strategy", "Bollinger Bands Strategy", "Bollinger Bands Strategy dire",
  "ChannelBreakOutStrategy", "Consecutive Up/Down Strategy", "Greedy Strategy",
  "Inside Bar Strategy", "Keltner Channels Strategy", "MACD Strategy",
  "Momentum Strategy", "MovingAvgLine Cross"
];

const profiles = [
  "Fixed Range Volume Profile", "Periodic Volume Profile", "Session Volume Profile",
  "Session Volume Profile HD", "Visible Range Volume Profile"
];

const patterns = [
  "All Chart Patterns", "Bearish Flag Chart Pattern", "Bullish Flag Chart Pattern",
  "Cup and Handle Chart Pattern", "Inverted Cup and Handle Chart Pattern",
  "Double Bottom Chart Pattern", "Double Top Chart Pattern", "Elliott Wave Chart Pattern",
  "Head and Shoulders Chart Pattern", "Inverted Head and Shoulders Chart Pattern",
  "Bearish Pennant Chart Pattern"
];

/* Add technicalindicators library */
const TI = window.TI;
const tiIndicators = Object.keys(TI)
  .filter(k => typeof TI[k] === 'function' && k !== 'Indicator')
  .map(name => name);

/* Merge with your list */
const allTechnicals = [...new Set([...indicators, ...tiIndicators])].sort();

/* ──────────────────────────────────────
   3. Render list
   ────────────────────────────────────── */
const list = document.getElementById('indicator-list');
let currentData = allTechnicals;

function renderList(filter = '') {
  list.innerHTML = '';
  const data = currentData.filter(i => i.toLowerCase().includes(filter.toLowerCase()));
  data.forEach(item => {
    const li = document.createElement('li');
    li.className = 'indicator-item';
    li.dataset.name = item;
    li.innerHTML = `
      <div>
        <span class="name">${item}</span>
        ${item.includes('HD') || item.includes('NEW') ? '<span class="new">NEW</span>' : ''}
      </div>
      <button class="add-btn" title="Add to chart">+</button>
    `;
    li.querySelector('.add-btn').addEventListener('click', e => {
      e.stopPropagation();
      addToChart(item);
    });
    list.appendChild(li);
  });
}
renderList();

/* ──────────────────────────────────────
   4. Tab & Section Switching
   ────────────────────────────────────── */
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const tab = btn.dataset.tab;
    if (tab === 'indicators') currentData = allTechnicals;
    else if (tab === 'strategies') currentData = strategies;
    else if (tab === 'profiles') currentData = profiles;
    else if (tab === 'patterns') currentData = patterns;
    renderList(document.getElementById('global-search').value);
  });
});

document.querySelectorAll('[data-section]').forEach(item => {
  item.addEventListener('click', () => {
    document.querySelectorAll('[data-section]').forEach(i => i.classList.remove('active'));
    item.classList.add('active');
    // Future: load different content per section
  });
});

/* ──────────────────────────────────────
   5. Search
   ────────────────────────────────────── */
document.getElementById('global-search').addEventListener('input', e => {
  renderList(e.target.value);
});

/* ──────────────────────────────────────
   6. Add to chart
   ────────────────────────────────────── */
function addToChart(name) {
  let list = JSON.parse(localStorage.getItem('chartIndicators') || '[]');
  if (!list.includes(name)) {
    list.push(name);
    localStorage.setItem('chartIndicators', JSON.stringify(list));
    alert(`${name} added to chart!`);
  } else {
    alert(`${name} is already on the chart.`);
  }
}
</script>
</body>
</html>
